# Firebase App Hosting configuration
run:
  # Use Node.js 22 runtime
  runtime: nodejs22

  # Build command for Angular application
  buildCommand: npm run build:apphosting

  # Output directory
  outputDirectory: dist/shanal-cars-booking/browser

  # Environment variables
  env:
    - variable: NODE_ENV
      value: production
    - variable: FIREBASE_PROJECT_ID
      value: shanal

# Backend configuration
backend:
  # Connect to Firebase Functions
  functions:
    - generatePaymentLink
    - handleStripeWebhook
    - confirmBooking
    - getBookingStats
    - systemHealthMonitor
    - requestRoleAssignment
    - approveRoleAssignment
    - getPendingRoleRequests
    - emergencyDisablePayments
    - emergencyEnablePayments
    - emergencyDatabaseBackup
    - getEmergencyStatus

# Database configuration
database:
  # Connect to Firestore
  firestore:
    enabled: true
    rules: firestore.rules
    indexes: firestore.indexes.json

# Authentication configuration
auth:
  enabled: true

# Security configuration
security:
  # Enable security headers
  headers:
    - name: X-Frame-Options
      value: DENY
    - name: X-Content-Type-Options
      value: nosniff
    - name: X-XSS-Protection
      value: 1; mode=block
    - name: Strict-Transport-Security
      value: max-age=31536000; includeSubDomains
    - name: Content-Security-Policy
      value: "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.gstatic.com https://www.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https://*.firebaseapp.com https://*.googleapis.com;"

# Performance configuration
performance:
  # Enable compression
  compression: true

  # Cache configuration
  cache:
    static:
      maxAge: 31536000
    dynamic:
      maxAge: 3600

# Monitoring configuration
monitoring:
  # Enable performance monitoring
  performance: true

  # Enable error reporting
  errorReporting: true

  # Custom metrics
  customMetrics:
    - name: booking_creation_time
      type: histogram
    - name: payment_processing_time
      type: histogram
    - name: admin_login_time
      type: histogram
